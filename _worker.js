var _0xa882g=(320958^320952)+(682929^682928);const WS_READY_STATE_OPEN=638300^638301;_0xa882g=(409350^409350)+(796571^796572);var _0xd41ff;const WS_READY_STATE_CLOSING=666790^666788;_0xd41ff='\u0069\u006A\u006C\u0065\u0063\u006E';const CF_FALLBACK_IPS=["\u005B\u0032\u0061\u0030\u0030\u003A\u0031\u0030\u0039\u0038\u003A\u0032\u0062\u003A\u003A\u0031\u003A\u0036\u0038\u0031\u0035\u003A\u0035\u0038\u0038\u0031\u005D"];var _0x2f2dae;const encoder=new TextEncoder();_0x2f2dae=(483693^483689)+(928689^928692);import{connect}from"\u0063\u006C\u006F\u0075\u0064\u0066\u006C\u0061\u0072\u0065\u003A\u0073\u006F\u0063\u006B\u0065\u0074\u0073";export default{async fetch(request,env,ctx){try{const token="NCIAP".split("").reverse().join("");const upgradeHeader=request['\u0068\u0065\u0061\u0064\u0065\u0072\u0073']['\u0067\u0065\u0074']("\u0055\u0070\u0067\u0072\u0061\u0064\u0065");if(!upgradeHeader||upgradeHeader['\u0074\u006F\u004C\u006F\u0077\u0065\u0072\u0043\u0061\u0073\u0065']()!=="\u0077\u0065\u0062\u0073\u006F\u0063\u006B\u0065\u0074"){return new URL(request['\u0075\u0072\u006C'])['\u0070\u0061\u0074\u0068\u006E\u0061\u006D\u0065']==="\u002F"?new Response("\u0057\u0065\u0062\u0053\u006F\u0063\u006B\u0065\u0074\u0020\u0050\u0072\u006F\u0078\u0079\u0020\u0053\u0065\u0072\u0076\u0065\u0072",{'\u0073\u0074\u0061\u0074\u0075\u0073':200}):new Response("tekcoSbeW detcepxE".split("").reverse().join(""),{'\u0073\u0074\u0061\u0074\u0075\u0073':426});}if(token&&request['\u0068\u0065\u0061\u0064\u0065\u0072\u0073']['\u0067\u0065\u0074']("locotorP-tekcoSbeW-ceS".split("").reverse().join(""))!==token){return new Response("\u0055\u006E\u0061\u0075\u0074\u0068\u006F\u0072\u0069\u007A\u0065\u0064",{"status":401});}const[client,server]=Object['\u0076\u0061\u006C\u0075\u0065\u0073'](new WebSocketPair());server['\u0061\u0063\u0063\u0065\u0070\u0074']();handleSession(server)['\u0063\u0061\u0074\u0063\u0068'](()=>safeCloseWebSocket(server));const responseInit={'\u0073\u0074\u0061\u0074\u0075\u0073':101,'\u0077\u0065\u0062\u0053\u006F\u0063\u006B\u0065\u0074':client};if(token){responseInit['\u0068\u0065\u0061\u0064\u0065\u0072\u0073']={"\u0053\u0065\u0063\u002D\u0057\u0065\u0062\u0053\u006F\u0063\u006B\u0065\u0074\u002D\u0050\u0072\u006F\u0074\u006F\u0063\u006F\u006C":token};}return new Response(null,responseInit);}catch(err){return new Response(err['\u0074\u006F\u0053\u0074\u0072\u0069\u006E\u0067'](),{'\u0073\u0074\u0061\u0074\u0075\u0073':500});}}};async function handleSession(webSocket){let _0x_0x536,_0xe3da3c,_0x35c33e;let _0x2538f=false;const _0x5bccd=()=>{if(_0x2538f)return;_0x2538f=!![];try{_0xe3da3c?.releaseLock();}catch{}try{_0x35c33e?.releaseLock();}catch{}try{_0x_0x536?.close();}catch{}_0xe3da3c=_0x35c33e=_0x_0x536=null;safeCloseWebSocket(webSocket);};const _0x671ad=async()=>{try{while(!_0x2538f&&_0x35c33e){const{"done":done,"value":value}=await _0x35c33e['\u0072\u0065\u0061\u0064']();if(done)break;if(webSocket['\u0072\u0065\u0061\u0064\u0079\u0053\u0074\u0061\u0074\u0065']!==WS_READY_STATE_OPEN)break;if(value?.byteLength>(506751^506751))webSocket['\u0073\u0065\u006E\u0064'](value);}}catch{}if(!_0x2538f){try{webSocket['\u0073\u0065\u006E\u0064']("\u0043\u004C\u004F\u0053\u0045");}catch{}_0x5bccd();}};const _0x0c2gd=addr=>{if(addr[676781^676781]==="\u005B"){const _0xf_0xfa1=addr['\u0069\u006E\u0064\u0065\u0078\u004F\u0066']("\u005D");return{'\u0068\u006F\u0073\u0074':addr['\u0073\u0075\u0062\u0073\u0074\u0072\u0069\u006E\u0067'](455536^455537,_0xf_0xfa1),"port":parseInt(addr['\u0073\u0075\u0062\u0073\u0074\u0072\u0069\u006E\u0067'](_0xf_0xfa1+(333386^333384)),142775^142781)};}var _0xfddafe=(693596^693594)+(714165^714160);const sep=addr['\u006C\u0061\u0073\u0074\u0049\u006E\u0064\u0065\u0078\u004F\u0066']("\u003A");_0xfddafe=(693404^693396)+(555189^555188);return{"host":addr['\u0073\u0075\u0062\u0073\u0074\u0072\u0069\u006E\u0067'](138681^138681,sep),"port":parseInt(addr['\u0073\u0075\u0062\u0073\u0074\u0072\u0069\u006E\u0067'](sep+(144948^144949)),629473^629483)};};var _0xfd949a;const _0xc7af1c=err=>{const _0x7cedc=err?.message?.toLowerCase()||'';return _0x7cedc['\u0069\u006E\u0063\u006C\u0075\u0064\u0065\u0073']("\u0070\u0072\u006F\u0078\u0079\u0020\u0072\u0065\u0071\u0075\u0065\u0073\u0074")||_0x7cedc['\u0069\u006E\u0063\u006C\u0075\u0064\u0065\u0073']("tcennoc tonnac".split("").reverse().join(""))||_0x7cedc['\u0069\u006E\u0063\u006C\u0075\u0064\u0065\u0073']("\u0063\u006C\u006F\u0075\u0064\u0066\u006C\u0061\u0072\u0065");};_0xfd949a=114461^114463;const _0x7eee3c=async(targetAddr,firstFrameData)=>{const{"host":host,"port":port}=_0x0c2gd(targetAddr);const _0xa113d=[null,...CF_FALLBACK_IPS];for(let i=129587^129587;i<_0xa113d['\u006C\u0065\u006E\u0067\u0074\u0068'];i++){try{_0x_0x536=connect({'\u0068\u006F\u0073\u0074\u006E\u0061\u006D\u0065':_0xa113d[i]||host,'\u0070\u006F\u0072\u0074':port});if(_0x_0x536['\u006F\u0070\u0065\u006E\u0065\u0064'])await _0x_0x536['\u006F\u0070\u0065\u006E\u0065\u0064'];_0xe3da3c=_0x_0x536['\u0077\u0072\u0069\u0074\u0061\u0062\u006C\u0065']['\u0067\u0065\u0074\u0057\u0072\u0069\u0074\u0065\u0072']();_0x35c33e=_0x_0x536['\u0072\u0065\u0061\u0064\u0061\u0062\u006C\u0065']['\u0067\u0065\u0074\u0052\u0065\u0061\u0064\u0065\u0072']();if(firstFrameData){await _0xe3da3c['\u0077\u0072\u0069\u0074\u0065'](encoder['\u0065\u006E\u0063\u006F\u0064\u0065'](firstFrameData));}webSocket['\u0073\u0065\u006E\u0064']("\u0043\u004F\u004E\u004E\u0045\u0043\u0054\u0045\u0044");_0x671ad();return;}catch(err){try{_0xe3da3c?.releaseLock();}catch{}try{_0x35c33e?.releaseLock();}catch{}try{_0x_0x536?.close();}catch{}_0xe3da3c=_0x35c33e=_0x_0x536=null;if(!_0xc7af1c(err)||i===_0xa113d['\u006C\u0065\u006E\u0067\u0074\u0068']-(562216^562217)){throw err;}}}};webSocket['\u0061\u0064\u0064\u0045\u0076\u0065\u006E\u0074\u004C\u0069\u0073\u0074\u0065\u006E\u0065\u0072']("egassem".split("").reverse().join(""),async event=>{if(_0x2538f)return;try{var _0x51c9ba;const _0x81ddda=event['\u0064\u0061\u0074\u0061'];_0x51c9ba="mpdfgn".split("").reverse().join("");if(typeof _0x81ddda==="\u0073\u0074\u0072\u0069\u006E\u0067"){if(_0x81ddda['\u0073\u0074\u0061\u0072\u0074\u0073\u0057\u0069\u0074\u0068'](":TCENNOC".split("").reverse().join(""))){const sep=_0x81ddda['\u0069\u006E\u0064\u0065\u0078\u004F\u0066']("\u007C",219662^219654);await _0x7eee3c(_0x81ddda['\u0073\u0075\u0062\u0073\u0074\u0072\u0069\u006E\u0067'](942454^942462,sep),_0x81ddda['\u0073\u0075\u0062\u0073\u0074\u0072\u0069\u006E\u0067'](sep+(157189^157188)));}else if(_0x81ddda['\u0073\u0074\u0061\u0072\u0074\u0073\u0057\u0069\u0074\u0068']("\u0044\u0041\u0054\u0041\u003A")){if(_0xe3da3c){await _0xe3da3c['\u0077\u0072\u0069\u0074\u0065'](encoder['\u0065\u006E\u0063\u006F\u0064\u0065'](_0x81ddda['\u0073\u0075\u0062\u0073\u0074\u0072\u0069\u006E\u0067'](304495^304490)));}}else if(_0x81ddda==="\u0043\u004C\u004F\u0053\u0045"){_0x5bccd();}}else if(_0x81ddda instanceof ArrayBuffer&&_0xe3da3c){await _0xe3da3c['\u0077\u0072\u0069\u0074\u0065'](new Uint8Array(_0x81ddda));}}catch(err){try{webSocket['\u0073\u0065\u006E\u0064']("\u0045\u0052\u0052\u004F\u0052\u003A"+err['\u006D\u0065\u0073\u0073\u0061\u0067\u0065']);}catch{}_0x5bccd();}});webSocket['\u0061\u0064\u0064\u0045\u0076\u0065\u006E\u0074\u004C\u0069\u0073\u0074\u0065\u006E\u0065\u0072']("\u0063\u006C\u006F\u0073\u0065",_0x5bccd);webSocket['\u0061\u0064\u0064\u0045\u0076\u0065\u006E\u0074\u004C\u0069\u0073\u0074\u0065\u006E\u0065\u0072']("rorre".split("").reverse().join(""),_0x5bccd);}function safeCloseWebSocket(ws){try{if(ws['\u0072\u0065\u0061\u0064\u0079\u0053\u0074\u0061\u0074\u0065']===WS_READY_STATE_OPEN||ws['\u0072\u0065\u0061\u0064\u0079\u0053\u0074\u0061\u0074\u0065']===WS_READY_STATE_CLOSING){ws['\u0063\u006C\u006F\u0073\u0065'](942476^942692,"desolc revreS".split("").reverse().join(""));}}catch{}}
